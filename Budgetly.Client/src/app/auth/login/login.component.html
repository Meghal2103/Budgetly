<div class="d-flex justify-content-center align-items-center" style="min-height: 81vh;">
    <div class="card shadow-sm rounded-4 p-4 my-5" style="width: 100%; max-width: 400px;">
        <h3 class="text-center mb-4 fw-bold text-muted">Login to Budgetly</h3>

        <form #loginForm="ngForm" (ngSubmit)="onSubmit(loginForm)">
            <!-- Error Message -->
            <div *ngIf="errorMessage" class="alert alert-danger alert-dismissible fade show" role="alert">
                <i class="bi bi-exclamation-triangle-fill me-2"></i>
                {{ errorMessage }}
                <button type="button" class="btn-close" (click)="errorMessage = ''" aria-label="Close"></button>
            </div>

            <div class="mb-3">
                <label for="email" class="form-label">Email address</label>
                <div class="input-group">
                    <span class="input-group-text">
                        <i class="bi bi-envelope"></i>
                    </span>
                    <input 
                        type="email" 
                        id="email" 
                        name="email" 
                        class="form-control" 
                        placeholder="Enter your email" 
                        [(ngModel)]="credential.email" 
                        required 
                        email 
                        #email="ngModel"
                        [disabled]="isLoading">
                </div>
                <div *ngIf="email.touched">
                    <small class="text-danger" *ngIf="email.errors?.['required']">Email is required.</small>
                    <small class="text-danger" *ngIf="email.errors?.['email']">Invalid email format.</small>
                </div>
            </div>

            <div class="mb-3">
                <label for="password" class="form-label">Password</label>
                <div class="input-group">
                    <span class="input-group-text">
                        <i class="bi bi-lock"></i>
                    </span>
                    <input 
                        type="password" 
                        id="password" 
                        name="password" 
                        class="form-control" 
                        placeholder="Enter your password" 
                        [(ngModel)]="credential.password" 
                        required 
                        #password="ngModel"
                        [disabled]="isLoading">
                </div>
                <div *ngIf="password.touched">
                    <small class="text-danger" *ngIf="password.errors?.['required']">Password is required.</small>
                </div>
            </div>

            <div class="d-grid mb-3">
                <button 
                    type="submit" 
                    class="btn btn-primary" 
                    [disabled]="loginForm.invalid || isLoading">
                    <span *ngIf="!isLoading">
                        <i class="bi bi-box-arrow-in-right me-2"></i>Login
                    </span>
                    <span *ngIf="isLoading">
                        <span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
                        Logging in...
                    </span>
                </button>
            </div>

            <div class="text-center">
                <small class="text-muted">
                    Don't have an account? 
                    <a routerLink="/auth/sign-up" class="text-decoration-none fw-semibold">Register here</a>
                </small>
            </div>
        </form>
    </div>
</div>